---
import { getEntry, type CollectionEntry } from "astro:content";
import { Image } from "astro:assets";

import { Collapsible } from "@/components/Collapsible";

interface Props {
  trust: CollectionEntry<"trust"> | CollectionEntry<"team">;
  category: "trust" | "team";
}

const { trust, category } = Astro.props;

const entry = await getEntry(category, trust.slug);
const { Content } = await entry!.render();
---

<div class="flex flex-col gap-4 rounded-md">
  <Image
    src={trust.data.image}
    width="192"
    height="192"
    alt=`${trust.data.name} profile image`
    class="mx-auto rounded-full"
  />
  <div>
    <h2 class="mb-0 text-center text-lg font-bold">{trust.data.name}</h2>
    <h3 class="text-center">{trust.data.position}</h3>
  </div>

  {
    trust.slug === "leigh-keown" && (
      <a
        href="mailto:hello@vsctrust.org.nz"
        class="shadow-button mx-auto bg-gray-600"
      >
        Contact me
      </a>
    )
  }

  <p class="mb-0">{trust.data.excerpt}</p>

  <div class="mx-auto">
    <Collapsible client:visible>
      <Content />
    </Collapsible>
  </div>
</div>
